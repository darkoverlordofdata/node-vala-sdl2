/* GlyphLayout.c generated by valac 0.34.9, the Vala compiler
 * generated from GlyphLayout.gs, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <gee.h>
#include <float.h>
#include <math.h>
#include <stdlib.h>
#include <string.h>


#define SDX_UTILS_TYPE_POOLABLE (sdx_utils_poolable_get_type ())
#define SDX_UTILS_POOLABLE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SDX_UTILS_TYPE_POOLABLE, sdxutilsPoolable))
#define SDX_UTILS_IS_POOLABLE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SDX_UTILS_TYPE_POOLABLE))
#define SDX_UTILS_POOLABLE_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SDX_UTILS_TYPE_POOLABLE, sdxutilsPoolableIface))

typedef struct _sdxutilsPoolable sdxutilsPoolable;
typedef struct _sdxutilsPoolableIface sdxutilsPoolableIface;

#define SDX_GRAPHICS_S2D_TYPE_GLYPH_LAYOUT (sdx_graphics_s2d_glyph_layout_get_type ())
#define SDX_GRAPHICS_S2D_GLYPH_LAYOUT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SDX_GRAPHICS_S2D_TYPE_GLYPH_LAYOUT, sdxgraphicss2dGlyphLayout))
#define SDX_GRAPHICS_S2D_GLYPH_LAYOUT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SDX_GRAPHICS_S2D_TYPE_GLYPH_LAYOUT, sdxgraphicss2dGlyphLayoutClass))
#define SDX_GRAPHICS_S2D_IS_GLYPH_LAYOUT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SDX_GRAPHICS_S2D_TYPE_GLYPH_LAYOUT))
#define SDX_GRAPHICS_S2D_IS_GLYPH_LAYOUT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SDX_GRAPHICS_S2D_TYPE_GLYPH_LAYOUT))
#define SDX_GRAPHICS_S2D_GLYPH_LAYOUT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SDX_GRAPHICS_S2D_TYPE_GLYPH_LAYOUT, sdxgraphicss2dGlyphLayoutClass))

typedef struct _sdxgraphicss2dGlyphLayout sdxgraphicss2dGlyphLayout;
typedef struct _sdxgraphicss2dGlyphLayoutClass sdxgraphicss2dGlyphLayoutClass;
typedef struct _sdxgraphicss2dGlyphLayoutPrivate sdxgraphicss2dGlyphLayoutPrivate;

#define SDX_GRAPHICS_S2D_GLYPH_LAYOUT_TYPE_GLYPH_RUN (sdx_graphics_s2d_glyph_layout_glyph_run_get_type ())
#define SDX_GRAPHICS_S2D_GLYPH_LAYOUT_GLYPH_RUN(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SDX_GRAPHICS_S2D_GLYPH_LAYOUT_TYPE_GLYPH_RUN, sdxgraphicss2dGlyphLayoutGlyphRun))
#define SDX_GRAPHICS_S2D_GLYPH_LAYOUT_GLYPH_RUN_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SDX_GRAPHICS_S2D_GLYPH_LAYOUT_TYPE_GLYPH_RUN, sdxgraphicss2dGlyphLayoutGlyphRunClass))
#define SDX_GRAPHICS_S2D_GLYPH_LAYOUT_IS_GLYPH_RUN(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SDX_GRAPHICS_S2D_GLYPH_LAYOUT_TYPE_GLYPH_RUN))
#define SDX_GRAPHICS_S2D_GLYPH_LAYOUT_IS_GLYPH_RUN_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SDX_GRAPHICS_S2D_GLYPH_LAYOUT_TYPE_GLYPH_RUN))
#define SDX_GRAPHICS_S2D_GLYPH_LAYOUT_GLYPH_RUN_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SDX_GRAPHICS_S2D_GLYPH_LAYOUT_TYPE_GLYPH_RUN, sdxgraphicss2dGlyphLayoutGlyphRunClass))

typedef struct _sdxgraphicss2dGlyphLayoutGlyphRun sdxgraphicss2dGlyphLayoutGlyphRun;
typedef struct _sdxgraphicss2dGlyphLayoutGlyphRunClass sdxgraphicss2dGlyphLayoutGlyphRunClass;

#define SDX_GRAPHICS_TYPE_COLOR (sdx_graphics_color_get_type ())
#define SDX_GRAPHICS_COLOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SDX_GRAPHICS_TYPE_COLOR, sdxgraphicsColor))
#define SDX_GRAPHICS_COLOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SDX_GRAPHICS_TYPE_COLOR, sdxgraphicsColorClass))
#define SDX_GRAPHICS_IS_COLOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SDX_GRAPHICS_TYPE_COLOR))
#define SDX_GRAPHICS_IS_COLOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SDX_GRAPHICS_TYPE_COLOR))
#define SDX_GRAPHICS_COLOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SDX_GRAPHICS_TYPE_COLOR, sdxgraphicsColorClass))

typedef struct _sdxgraphicsColor sdxgraphicsColor;
typedef struct _sdxgraphicsColorClass sdxgraphicsColorClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define SDX_GRAPHICS_S2D_TYPE_BITMAP_FONT (sdx_graphics_s2d_bitmap_font_get_type ())
#define SDX_GRAPHICS_S2D_BITMAP_FONT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SDX_GRAPHICS_S2D_TYPE_BITMAP_FONT, sdxgraphicss2dBitmapFont))
#define SDX_GRAPHICS_S2D_BITMAP_FONT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SDX_GRAPHICS_S2D_TYPE_BITMAP_FONT, sdxgraphicss2dBitmapFontClass))
#define SDX_GRAPHICS_S2D_IS_BITMAP_FONT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SDX_GRAPHICS_S2D_TYPE_BITMAP_FONT))
#define SDX_GRAPHICS_S2D_IS_BITMAP_FONT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SDX_GRAPHICS_S2D_TYPE_BITMAP_FONT))
#define SDX_GRAPHICS_S2D_BITMAP_FONT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SDX_GRAPHICS_S2D_TYPE_BITMAP_FONT, sdxgraphicss2dBitmapFontClass))

typedef struct _sdxgraphicss2dBitmapFont sdxgraphicss2dBitmapFont;
typedef struct _sdxgraphicss2dBitmapFontClass sdxgraphicss2dBitmapFontClass;
typedef struct _sdxgraphicss2dBitmapFontPrivate sdxgraphicss2dBitmapFontPrivate;

#define SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_BITMAP_FONT_DATA (sdx_graphics_s2d_bitmap_font_bitmap_font_data_get_type ())
#define SDX_GRAPHICS_S2D_BITMAP_FONT_BITMAP_FONT_DATA(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_BITMAP_FONT_DATA, sdxgraphicss2dBitmapFontBitmapFontData))
#define SDX_GRAPHICS_S2D_BITMAP_FONT_BITMAP_FONT_DATA_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_BITMAP_FONT_DATA, sdxgraphicss2dBitmapFontBitmapFontDataClass))
#define SDX_GRAPHICS_S2D_BITMAP_FONT_IS_BITMAP_FONT_DATA(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_BITMAP_FONT_DATA))
#define SDX_GRAPHICS_S2D_BITMAP_FONT_IS_BITMAP_FONT_DATA_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_BITMAP_FONT_DATA))
#define SDX_GRAPHICS_S2D_BITMAP_FONT_BITMAP_FONT_DATA_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_BITMAP_FONT_DATA, sdxgraphicss2dBitmapFontBitmapFontDataClass))

typedef struct _sdxgraphicss2dBitmapFontBitmapFontData sdxgraphicss2dBitmapFontBitmapFontData;
typedef struct _sdxgraphicss2dBitmapFontBitmapFontDataClass sdxgraphicss2dBitmapFontBitmapFontDataClass;

#define SDX_GRAPHICS_S2D_TYPE_TEXTURE_REGION (sdx_graphics_s2d_texture_region_get_type ())
#define SDX_GRAPHICS_S2D_TEXTURE_REGION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SDX_GRAPHICS_S2D_TYPE_TEXTURE_REGION, sdxgraphicss2dTextureRegion))
#define SDX_GRAPHICS_S2D_TEXTURE_REGION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SDX_GRAPHICS_S2D_TYPE_TEXTURE_REGION, sdxgraphicss2dTextureRegionClass))
#define SDX_GRAPHICS_S2D_IS_TEXTURE_REGION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SDX_GRAPHICS_S2D_TYPE_TEXTURE_REGION))
#define SDX_GRAPHICS_S2D_IS_TEXTURE_REGION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SDX_GRAPHICS_S2D_TYPE_TEXTURE_REGION))
#define SDX_GRAPHICS_S2D_TEXTURE_REGION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SDX_GRAPHICS_S2D_TYPE_TEXTURE_REGION, sdxgraphicss2dTextureRegionClass))

typedef struct _sdxgraphicss2dTextureRegion sdxgraphicss2dTextureRegion;
typedef struct _sdxgraphicss2dTextureRegionClass sdxgraphicss2dTextureRegionClass;
typedef struct _sdxgraphicss2dBitmapFontBitmapFontDataPrivate sdxgraphicss2dBitmapFontBitmapFontDataPrivate;

#define SDX_FILES_TYPE_FILE_HANDLE (sdx_files_file_handle_get_type ())
#define SDX_FILES_FILE_HANDLE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SDX_FILES_TYPE_FILE_HANDLE, sdxfilesFileHandle))
#define SDX_FILES_FILE_HANDLE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SDX_FILES_TYPE_FILE_HANDLE, sdxfilesFileHandleClass))
#define SDX_FILES_IS_FILE_HANDLE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SDX_FILES_TYPE_FILE_HANDLE))
#define SDX_FILES_IS_FILE_HANDLE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SDX_FILES_TYPE_FILE_HANDLE))
#define SDX_FILES_FILE_HANDLE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SDX_FILES_TYPE_FILE_HANDLE, sdxfilesFileHandleClass))

typedef struct _sdxfilesFileHandle sdxfilesFileHandle;
typedef struct _sdxfilesFileHandleClass sdxfilesFileHandleClass;

#define SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_GLYPH (sdx_graphics_s2d_bitmap_font_glyph_get_type ())
#define SDX_GRAPHICS_S2D_BITMAP_FONT_GLYPH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_GLYPH, sdxgraphicss2dBitmapFontGlyph))
#define SDX_GRAPHICS_S2D_BITMAP_FONT_GLYPH_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_GLYPH, sdxgraphicss2dBitmapFontGlyphClass))
#define SDX_GRAPHICS_S2D_BITMAP_FONT_IS_GLYPH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_GLYPH))
#define SDX_GRAPHICS_S2D_BITMAP_FONT_IS_GLYPH_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_GLYPH))
#define SDX_GRAPHICS_S2D_BITMAP_FONT_GLYPH_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_GLYPH, sdxgraphicss2dBitmapFontGlyphClass))

typedef struct _sdxgraphicss2dBitmapFontGlyph sdxgraphicss2dBitmapFontGlyph;
typedef struct _sdxgraphicss2dBitmapFontGlyphClass sdxgraphicss2dBitmapFontGlyphClass;

#define SDX_UTILS_TYPE_POOL (sdx_utils_pool_get_type ())
#define SDX_UTILS_POOL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SDX_UTILS_TYPE_POOL, sdxutilsPool))
#define SDX_UTILS_POOL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SDX_UTILS_TYPE_POOL, sdxutilsPoolClass))
#define SDX_UTILS_IS_POOL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SDX_UTILS_TYPE_POOL))
#define SDX_UTILS_IS_POOL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SDX_UTILS_TYPE_POOL))
#define SDX_UTILS_POOL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SDX_UTILS_TYPE_POOL, sdxutilsPoolClass))

typedef struct _sdxutilsPool sdxutilsPool;
typedef struct _sdxutilsPoolClass sdxutilsPoolClass;
typedef struct _sdxgraphicss2dGlyphLayoutGlyphRunPrivate sdxgraphicss2dGlyphLayoutGlyphRunPrivate;
typedef struct _sdxgraphicss2dBitmapFontGlyphPrivate sdxgraphicss2dBitmapFontGlyphPrivate;
#define _sdx_graphics_s2d_bitmap_font_glyph_unref0(var) ((var == NULL) ? NULL : (var = (sdx_graphics_s2d_bitmap_font_glyph_unref (var), NULL)))
#define _g_free0(var) ((var == NULL) ? NULL : (var = (g_free (var), NULL)))
#define _sdx_graphics_s2d_bitmap_font_bitmap_font_data_unref0(var) ((var == NULL) ? NULL : (var = (sdx_graphics_s2d_bitmap_font_bitmap_font_data_unref (var), NULL)))

struct _sdxutilsPoolableIface {
	GTypeInterface parent_iface;
	void (*reset) (sdxutilsPoolable* self);
};

struct _sdxgraphicss2dGlyphLayout {
	GObject parent_instance;
	sdxgraphicss2dGlyphLayoutPrivate * priv;
	GeeArrayList* runs;
	gdouble width;
	gdouble height;
	GeeArrayList* colorStack;
};

struct _sdxgraphicss2dGlyphLayoutClass {
	GObjectClass parent_class;
};

struct _sdxgraphicss2dBitmapFont {
	GTypeInstance parent_instance;
	volatile int ref_count;
	sdxgraphicss2dBitmapFontPrivate * priv;
	sdxgraphicss2dBitmapFontBitmapFontData* data;
	GeeArrayList* regions;
};

struct _sdxgraphicss2dBitmapFontClass {
	GTypeClass parent_class;
	void (*finalize) (sdxgraphicss2dBitmapFont *self);
};

struct _sdxgraphicss2dBitmapFontBitmapFontData {
	GTypeInstance parent_instance;
	volatile int ref_count;
	sdxgraphicss2dBitmapFontBitmapFontDataPrivate * priv;
	gchar** imagePaths;
	gint imagePaths_length1;
	sdxfilesFileHandle* fontFile;
	gboolean flipped;
	gdouble padTop;
	gdouble padRight;
	gdouble padBottom;
	gdouble padLeft;
	gdouble lineHeight;
	gdouble capHeight;
	gdouble ascent;
	gdouble descent;
	gdouble down;
	gdouble blankLineScale;
	gdouble scaleX;
	gdouble scaleY;
	gboolean markupEnabled;
	gdouble cursorX;
	sdxgraphicss2dBitmapFontGlyph** glyphs;
	gint glyphs_length1;
	gint glyphs_length2;
	sdxgraphicss2dBitmapFontGlyph* missingGlyph;
	gdouble spaceWidth;
	gdouble xHeight;
	gchar* breakChars;
	gint breakChars_length1;
	gchar* xChars;
	gint xChars_length1;
	gchar* capChars;
	gint capChars_length1;
};

struct _sdxgraphicss2dBitmapFontBitmapFontDataClass {
	GTypeClass parent_class;
	void (*finalize) (sdxgraphicss2dBitmapFontBitmapFontData *self);
};

struct _sdxgraphicss2dGlyphLayoutGlyphRun {
	GObject parent_instance;
	sdxgraphicss2dGlyphLayoutGlyphRunPrivate * priv;
	GeeArrayList* glyphs;
	GeeArrayList* xAdvances;
	gdouble x;
	gdouble y;
	gdouble width;
	sdxgraphicsColor* color;
};

struct _sdxgraphicss2dGlyphLayoutGlyphRunClass {
	GObjectClass parent_class;
};

struct _sdxgraphicss2dBitmapFontGlyph {
	GTypeInstance parent_instance;
	volatile int ref_count;
	sdxgraphicss2dBitmapFontGlyphPrivate * priv;
	gint id;
	gint x;
	gint y;
	gint width;
	gint height;
	gdouble u;
	gdouble v;
	gdouble u2;
	gdouble v2;
	gint xoffset;
	gint yoffset;
	gint xadvance;
	gchar* kerning;
	gint kerning_length1;
	gint kerning_length2;
	gboolean fixedWidth;
	gint page;
};

struct _sdxgraphicss2dBitmapFontGlyphClass {
	GTypeClass parent_class;
	void (*finalize) (sdxgraphicss2dBitmapFontGlyph *self);
};


static gpointer sdx_graphics_s2d_glyph_layout_parent_class = NULL;
static gpointer sdx_graphics_s2d_glyph_layout_glyph_run_parent_class = NULL;
static sdxutilsPoolableIface* sdx_graphics_s2d_glyph_layout_glyph_run_sdx_utils_poolable_parent_iface = NULL;
static sdxutilsPoolableIface* sdx_graphics_s2d_glyph_layout_sdx_utils_poolable_parent_iface = NULL;

GType sdx_utils_poolable_get_type (void) G_GNUC_CONST;
GType sdx_graphics_s2d_glyph_layout_get_type (void) G_GNUC_CONST;
GType sdx_graphics_s2d_glyph_layout_glyph_run_get_type (void) G_GNUC_CONST;
GType sdx_graphics_color_get_type (void) G_GNUC_CONST;
enum  {
	SDX_GRAPHICS_S2D_GLYPH_LAYOUT_DUMMY_PROPERTY
};
gpointer sdx_graphics_s2d_bitmap_font_ref (gpointer instance);
void sdx_graphics_s2d_bitmap_font_unref (gpointer instance);
GParamSpec* sdx_graphics_s2d_param_spec_bitmap_font (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void sdx_graphics_s2d_value_set_bitmap_font (GValue* value, gpointer v_object);
void sdx_graphics_s2d_value_take_bitmap_font (GValue* value, gpointer v_object);
gpointer sdx_graphics_s2d_value_get_bitmap_font (const GValue* value);
GType sdx_graphics_s2d_bitmap_font_get_type (void) G_GNUC_CONST;
sdxgraphicss2dGlyphLayout* sdx_graphics_s2d_glyph_layout_new (sdxgraphicss2dBitmapFont* font, const gchar* str, sdxgraphicsColor* color, gdouble targetWidth, gdouble halign, gboolean wrap, const gchar* truncate);
sdxgraphicss2dGlyphLayout* sdx_graphics_s2d_glyph_layout_construct (GType object_type, sdxgraphicss2dBitmapFont* font, const gchar* str, sdxgraphicsColor* color, gdouble targetWidth, gdouble halign, gboolean wrap, const gchar* truncate);
void sdx_graphics_s2d_glyph_layout_setText (sdxgraphicss2dGlyphLayout* self, sdxgraphicss2dBitmapFont* font, const gchar* str, gint start, gint end, sdxgraphicsColor* color, gdouble targetWidth, gdouble halign, gboolean wrap, const gchar* truncate);
gpointer sdx_graphics_s2d_bitmap_font_bitmap_font_data_ref (gpointer instance);
void sdx_graphics_s2d_bitmap_font_bitmap_font_data_unref (gpointer instance);
GParamSpec* sdx_graphics_s2d_bitmap_font_param_spec_bitmap_font_data (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void sdx_graphics_s2d_bitmap_font_value_set_bitmap_font_data (GValue* value, gpointer v_object);
void sdx_graphics_s2d_bitmap_font_value_take_bitmap_font_data (GValue* value, gpointer v_object);
gpointer sdx_graphics_s2d_bitmap_font_value_get_bitmap_font_data (const GValue* value);
GType sdx_graphics_s2d_bitmap_font_bitmap_font_data_get_type (void) G_GNUC_CONST;
GType sdx_graphics_s2d_texture_region_get_type (void) G_GNUC_CONST;
GType sdx_files_file_handle_get_type (void) G_GNUC_CONST;
gpointer sdx_graphics_s2d_bitmap_font_glyph_ref (gpointer instance);
void sdx_graphics_s2d_bitmap_font_glyph_unref (gpointer instance);
GParamSpec* sdx_graphics_s2d_bitmap_font_param_spec_glyph (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void sdx_graphics_s2d_bitmap_font_value_set_glyph (GValue* value, gpointer v_object);
void sdx_graphics_s2d_bitmap_font_value_take_glyph (GValue* value, gpointer v_object);
gpointer sdx_graphics_s2d_bitmap_font_value_get_glyph (const GValue* value);
GType sdx_graphics_s2d_bitmap_font_glyph_get_type (void) G_GNUC_CONST;
GType sdx_utils_pool_get_type (void) G_GNUC_CONST;
sdxutilsPool* sdx_utils_pools_get (GType type);
void sdx_utils_pool_free (sdxutilsPool* self, GObject* object);
gint sdx_graphics_s2d_glyph_layout_parseColorMarkup (sdxgraphicss2dGlyphLayout* self, const gchar* str, gint start, gint end, sdxutilsPool* colorPool);
GObject* sdx_utils_pool_obtain (sdxutilsPool* self);
sdxgraphicsColor* sdx_graphics_color_set (sdxgraphicsColor* self, sdxgraphicsColor* color);
void sdx_graphics_s2d_bitmap_font_bitmap_font_data_getGlyphs (sdxgraphicss2dBitmapFontBitmapFontData* self, sdxgraphicss2dGlyphLayoutGlyphRun* run, const gchar* str, gint start, gint end, gboolean tightBounds);
void sdx_graphics_s2d_glyph_layout_truncate (sdxgraphicss2dGlyphLayout* self, sdxgraphicss2dBitmapFontBitmapFontData* fontData, sdxgraphicss2dGlyphLayoutGlyphRun* run, gdouble targetWidth, const gchar* truncate, gint widthIndex, sdxutilsPool* glyphRunPool);
gint sdx_graphics_s2d_bitmap_font_bitmap_font_data_getWrapIndex (sdxgraphicss2dBitmapFontBitmapFontData* self, gint start, GeeArrayList* glyphs);
sdxgraphicss2dGlyphLayoutGlyphRun* sdx_graphics_s2d_glyph_layout_wrap (sdxgraphicss2dGlyphLayout* self, sdxgraphicss2dBitmapFontBitmapFontData* fontData, sdxgraphicss2dGlyphLayoutGlyphRun* first, sdxutilsPool* glyphRunPool, gint wrapIndex, gint widthIndex);
static void sdx_graphics_s2d_glyph_layout_real_reset (sdxutilsPoolable* base);
enum  {
	SDX_GRAPHICS_S2D_GLYPH_LAYOUT_GLYPH_RUN_DUMMY_PROPERTY
};
sdxgraphicsColor* sdx_graphics_color_new (gint64 value);
sdxgraphicsColor* sdx_graphics_color_construct (GType object_type, gint64 value);
static void sdx_graphics_s2d_glyph_layout_glyph_run_real_reset (sdxutilsPoolable* base);
sdxgraphicss2dGlyphLayoutGlyphRun* sdx_graphics_s2d_glyph_layout_glyph_run_new (void);
sdxgraphicss2dGlyphLayoutGlyphRun* sdx_graphics_s2d_glyph_layout_glyph_run_construct (GType object_type);
static void sdx_graphics_s2d_glyph_layout_glyph_run_finalize (GObject* obj);
static void sdx_graphics_s2d_glyph_layout_finalize (GObject* obj);


sdxgraphicss2dGlyphLayout* sdx_graphics_s2d_glyph_layout_construct (GType object_type, sdxgraphicss2dBitmapFont* font, const gchar* str, sdxgraphicsColor* color, gdouble targetWidth, gdouble halign, gboolean wrap, const gchar* truncate) {
	sdxgraphicss2dGlyphLayout * self = NULL;
	sdxgraphicss2dBitmapFont* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	const gchar* _tmp2_ = NULL;
	gint _tmp3_ = 0;
	gint _tmp4_ = 0;
	sdxgraphicsColor* _tmp5_ = NULL;
	gdouble _tmp6_ = 0.0;
	gdouble _tmp7_ = 0.0;
	gboolean _tmp8_ = FALSE;
	const gchar* _tmp9_ = NULL;
	g_return_val_if_fail (str != NULL, NULL);
	g_return_val_if_fail (truncate != NULL, NULL);
	self = (sdxgraphicss2dGlyphLayout*) g_object_new (object_type, NULL);
	_tmp0_ = font;
	_tmp1_ = str;
	_tmp2_ = str;
	_tmp3_ = strlen (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = color;
	_tmp6_ = targetWidth;
	_tmp7_ = halign;
	_tmp8_ = wrap;
	_tmp9_ = truncate;
	sdx_graphics_s2d_glyph_layout_setText (self, _tmp0_, _tmp1_, 0, _tmp4_, _tmp5_, _tmp6_, _tmp7_, _tmp8_, _tmp9_);
	return self;
}


sdxgraphicss2dGlyphLayout* sdx_graphics_s2d_glyph_layout_new (sdxgraphicss2dBitmapFont* font, const gchar* str, sdxgraphicsColor* color, gdouble targetWidth, gdouble halign, gboolean wrap, const gchar* truncate) {
	return sdx_graphics_s2d_glyph_layout_construct (SDX_GRAPHICS_S2D_TYPE_GLYPH_LAYOUT, font, str, color, targetWidth, halign, wrap, truncate);
}


static gpointer _sdx_graphics_s2d_bitmap_font_bitmap_font_data_ref0 (gpointer self) {
	return self ? sdx_graphics_s2d_bitmap_font_bitmap_font_data_ref (self) : NULL;
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static gchar string_get (const gchar* self, glong index) {
	gchar result = '\0';
	glong _tmp0_ = 0L;
	gchar _tmp1_ = '\0';
	g_return_val_if_fail (self != NULL, '\0');
	_tmp0_ = index;
	_tmp1_ = ((gchar*) self)[_tmp0_];
	result = _tmp1_;
	return result;
}


void sdx_graphics_s2d_glyph_layout_setText (sdxgraphicss2dGlyphLayout* self, sdxgraphicss2dBitmapFont* font, const gchar* str, gint start, gint end, sdxgraphicsColor* color, gdouble targetWidth, gdouble halign, gboolean wrap, const gchar* truncate) {
	const gchar* _tmp0_ = NULL;
	sdxgraphicss2dBitmapFontBitmapFontData* fontData = NULL;
	sdxgraphicss2dBitmapFont* _tmp5_ = NULL;
	sdxgraphicss2dBitmapFontBitmapFontData* _tmp6_ = NULL;
	sdxgraphicss2dBitmapFontBitmapFontData* _tmp7_ = NULL;
	gboolean markupEnabled = FALSE;
	sdxgraphicss2dBitmapFontBitmapFontData* _tmp8_ = NULL;
	gboolean _tmp9_ = FALSE;
	sdxutilsPool* glyphRunPool = NULL;
	sdxutilsPool* _tmp10_ = NULL;
	GeeArrayList* _tmp24_ = NULL;
	gdouble x = 0.0;
	gdouble y = 0.0;
	gdouble width = 0.0;
	gint lines = 0;
	gint blankLines = 0;
	sdxgraphicsColor* nextColor = NULL;
	sdxgraphicsColor* _tmp25_ = NULL;
	sdxgraphicsColor* _tmp26_ = NULL;
	GeeArrayList* _tmp27_ = NULL;
	sdxgraphicsColor* _tmp28_ = NULL;
	sdxutilsPool* colorPool = NULL;
	sdxutilsPool* _tmp29_ = NULL;
	gint runStart = 0;
	gint _tmp30_ = 0;
	g_return_if_fail (self != NULL);
	g_return_if_fail (font != NULL);
	g_return_if_fail (str != NULL);
	g_return_if_fail (truncate != NULL);
	_tmp0_ = truncate;
	if (_tmp0_ != NULL) {
		wrap = TRUE;
	} else {
		gdouble _tmp1_ = 0.0;
		sdxgraphicss2dBitmapFont* _tmp2_ = NULL;
		sdxgraphicss2dBitmapFontBitmapFontData* _tmp3_ = NULL;
		gdouble _tmp4_ = 0.0;
		_tmp1_ = targetWidth;
		_tmp2_ = font;
		_tmp3_ = _tmp2_->data;
		_tmp4_ = _tmp3_->spaceWidth;
		if (_tmp1_ <= _tmp4_) {
			wrap = FALSE;
		}
	}
	_tmp5_ = font;
	_tmp6_ = _tmp5_->data;
	_tmp7_ = _sdx_graphics_s2d_bitmap_font_bitmap_font_data_ref0 (_tmp6_);
	fontData = _tmp7_;
	_tmp8_ = fontData;
	_tmp9_ = _tmp8_->markupEnabled;
	markupEnabled = _tmp9_;
	_tmp10_ = sdx_utils_pools_get (SDX_GRAPHICS_S2D_GLYPH_LAYOUT_TYPE_GLYPH_RUN);
	glyphRunPool = _tmp10_;
	{
		GeeArrayList* _run_list = NULL;
		GeeArrayList* _tmp11_ = NULL;
		GeeArrayList* _tmp12_ = NULL;
		gint _run_size = 0;
		GeeArrayList* _tmp13_ = NULL;
		gint _tmp14_ = 0;
		gint _tmp15_ = 0;
		gint _run_index = 0;
		_tmp11_ = self->runs;
		_tmp12_ = _g_object_ref0 (_tmp11_);
		_run_list = _tmp12_;
		_tmp13_ = _run_list;
		_tmp14_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp13_);
		_tmp15_ = _tmp14_;
		_run_size = _tmp15_;
		_run_index = -1;
		while (TRUE) {
			gint _tmp16_ = 0;
			gint _tmp17_ = 0;
			gint _tmp18_ = 0;
			sdxgraphicss2dGlyphLayoutGlyphRun* run = NULL;
			GeeArrayList* _tmp19_ = NULL;
			gint _tmp20_ = 0;
			gpointer _tmp21_ = NULL;
			sdxutilsPool* _tmp22_ = NULL;
			sdxgraphicss2dGlyphLayoutGlyphRun* _tmp23_ = NULL;
			_tmp16_ = _run_index;
			_run_index = _tmp16_ + 1;
			_tmp17_ = _run_index;
			_tmp18_ = _run_size;
			if (!(_tmp17_ < _tmp18_)) {
				break;
			}
			_tmp19_ = _run_list;
			_tmp20_ = _run_index;
			_tmp21_ = gee_abstract_list_get ((GeeAbstractList*) _tmp19_, _tmp20_);
			run = (sdxgraphicss2dGlyphLayoutGlyphRun*) _tmp21_;
			_tmp22_ = glyphRunPool;
			_tmp23_ = run;
			sdx_utils_pool_free (_tmp22_, (GObject*) _tmp23_);
			_g_object_unref0 (run);
		}
		_g_object_unref0 (_run_list);
	}
	_tmp24_ = self->runs;
	gee_abstract_collection_clear ((GeeAbstractCollection*) _tmp24_);
	x = 0.0;
	y = 0.0;
	width = 0.0;
	lines = 0;
	blankLines = 0;
	_tmp25_ = color;
	_tmp26_ = _g_object_ref0 (_tmp25_);
	nextColor = _tmp26_;
	_tmp27_ = self->colorStack;
	_tmp28_ = color;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp27_, _tmp28_);
	_tmp29_ = sdx_utils_pools_get (SDX_GRAPHICS_TYPE_COLOR);
	colorPool = _tmp29_;
	_tmp30_ = start;
	runStart = _tmp30_;
	while (TRUE) {
		gint runEnd = 0;
		gboolean newline = FALSE;
		gboolean colorRun = FALSE;
		gint _tmp31_ = 0;
		gint _tmp32_ = 0;
		gint _tmp54_ = 0;
		runEnd = -1;
		newline = FALSE;
		colorRun = FALSE;
		_tmp31_ = start;
		_tmp32_ = end;
		if (_tmp31_ == _tmp32_) {
			gint _tmp33_ = 0;
			gint _tmp34_ = 0;
			gint _tmp35_ = 0;
			_tmp33_ = runStart;
			_tmp34_ = end;
			if (_tmp33_ == _tmp34_) {
				break;
			}
			_tmp35_ = end;
			runEnd = _tmp35_;
		} else {
			const gchar* _tmp36_ = NULL;
			gint _tmp37_ = 0;
			gchar _tmp38_ = '\0';
			_tmp36_ = str;
			_tmp37_ = start;
			start = _tmp37_ + 1;
			_tmp38_ = string_get (_tmp36_, (glong) _tmp37_);
			switch (_tmp38_) {
				case '\n':
				{
					{
						gint _tmp39_ = 0;
						_tmp39_ = start;
						runEnd = _tmp39_ - 1;
						newline = TRUE;
					}
					break;
				}
				case '[':
				{
					{
						gboolean _tmp40_ = FALSE;
						_tmp40_ = markupEnabled;
						if (_tmp40_) {
							gint length = 0;
							const gchar* _tmp41_ = NULL;
							gint _tmp42_ = 0;
							gint _tmp43_ = 0;
							sdxutilsPool* _tmp44_ = NULL;
							gint _tmp45_ = 0;
							gint _tmp46_ = 0;
							_tmp41_ = str;
							_tmp42_ = start;
							_tmp43_ = end;
							_tmp44_ = colorPool;
							_tmp45_ = sdx_graphics_s2d_glyph_layout_parseColorMarkup (self, _tmp41_, _tmp42_, _tmp43_, _tmp44_);
							length = _tmp45_;
							_tmp46_ = length;
							if (_tmp46_ >= 0) {
								gint _tmp47_ = 0;
								gint _tmp48_ = 0;
								gint _tmp49_ = 0;
								GeeArrayList* _tmp50_ = NULL;
								gpointer _tmp51_ = NULL;
								_tmp47_ = start;
								runEnd = _tmp47_ - 1;
								_tmp48_ = start;
								_tmp49_ = length;
								start = _tmp48_ + (_tmp49_ + 1);
								_tmp50_ = self->colorStack;
								_tmp51_ = gee_list_last ((GeeList*) _tmp50_);
								_g_object_unref0 (nextColor);
								nextColor = (sdxgraphicsColor*) _tmp51_;
								colorRun = TRUE;
							} else {
								gint _tmp52_ = 0;
								_tmp52_ = length;
								if (_tmp52_ == (-2)) {
									gint _tmp53_ = 0;
									_tmp53_ = start;
									start = _tmp53_ + 1;
									continue;
								}
							}
						}
					}
					break;
				}
				default:
				break;
			}
		}
		_tmp54_ = runEnd;
		if (_tmp54_ != (-1)) {
			gint _tmp55_ = 0;
			gint _tmp56_ = 0;
			gboolean _tmp184_ = FALSE;
			gint _tmp199_ = 0;
			sdxgraphicsColor* _tmp200_ = NULL;
			_tmp55_ = runEnd;
			_tmp56_ = runStart;
			if (_tmp55_ != _tmp56_) {
				sdxgraphicss2dGlyphLayoutGlyphRun* run = NULL;
				sdxutilsPool* _tmp57_ = NULL;
				GObject* _tmp58_ = NULL;
				sdxgraphicss2dGlyphLayoutGlyphRun* _tmp59_ = NULL;
				sdxgraphicsColor* _tmp60_ = NULL;
				sdxgraphicsColor* _tmp61_ = NULL;
				sdxgraphicsColor* _tmp62_ = NULL;
				sdxgraphicsColor* _tmp63_ = NULL;
				sdxgraphicss2dGlyphLayoutGlyphRun* _tmp64_ = NULL;
				gdouble _tmp65_ = 0.0;
				sdxgraphicss2dGlyphLayoutGlyphRun* _tmp66_ = NULL;
				gdouble _tmp67_ = 0.0;
				sdxgraphicss2dBitmapFontBitmapFontData* _tmp68_ = NULL;
				sdxgraphicss2dGlyphLayoutGlyphRun* _tmp69_ = NULL;
				const gchar* _tmp70_ = NULL;
				gint _tmp71_ = 0;
				gint _tmp72_ = 0;
				gboolean _tmp73_ = FALSE;
				sdxgraphicss2dGlyphLayoutGlyphRun* _tmp74_ = NULL;
				GeeArrayList* _tmp75_ = NULL;
				gint _tmp76_ = 0;
				gint _tmp77_ = 0;
				_tmp57_ = glyphRunPool;
				_tmp58_ = sdx_utils_pool_obtain (_tmp57_);
				run = G_TYPE_CHECK_INSTANCE_CAST (_tmp58_, SDX_GRAPHICS_S2D_GLYPH_LAYOUT_TYPE_GLYPH_RUN, sdxgraphicss2dGlyphLayoutGlyphRun);
				_tmp59_ = run;
				_tmp60_ = _tmp59_->color;
				_tmp61_ = color;
				_tmp62_ = sdx_graphics_color_set (_tmp60_, _tmp61_);
				_tmp63_ = _tmp62_;
				_g_object_unref0 (_tmp63_);
				_tmp64_ = run;
				_tmp65_ = x;
				_tmp64_->x = _tmp65_;
				_tmp66_ = run;
				_tmp67_ = y;
				_tmp66_->y = _tmp67_;
				_tmp68_ = fontData;
				_tmp69_ = run;
				_tmp70_ = str;
				_tmp71_ = runStart;
				_tmp72_ = runEnd;
				_tmp73_ = colorRun;
				sdx_graphics_s2d_bitmap_font_bitmap_font_data_getGlyphs (_tmp68_, _tmp69_, _tmp70_, _tmp71_, _tmp72_, _tmp73_);
				_tmp74_ = run;
				_tmp75_ = _tmp74_->glyphs;
				_tmp76_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp75_);
				_tmp77_ = _tmp76_;
				if (_tmp77_ == 0) {
					sdxutilsPool* _tmp78_ = NULL;
					sdxgraphicss2dGlyphLayoutGlyphRun* _tmp79_ = NULL;
					_tmp78_ = glyphRunPool;
					_tmp79_ = run;
					sdx_utils_pool_free (_tmp78_, (GObject*) _tmp79_);
				} else {
					GeeArrayList* _tmp80_ = NULL;
					sdxgraphicss2dGlyphLayoutGlyphRun* _tmp81_ = NULL;
					GeeArrayList* xAdvances = NULL;
					sdxgraphicss2dGlyphLayoutGlyphRun* _tmp82_ = NULL;
					GeeArrayList* _tmp83_ = NULL;
					GeeArrayList* _tmp84_ = NULL;
					gint n = 0;
					GeeArrayList* _tmp85_ = NULL;
					gint _tmp86_ = 0;
					gint _tmp87_ = 0;
					_tmp80_ = self->runs;
					_tmp81_ = run;
					gee_abstract_collection_add ((GeeAbstractCollection*) _tmp80_, _tmp81_);
					_tmp82_ = run;
					_tmp83_ = _tmp82_->xAdvances;
					_tmp84_ = _g_object_ref0 (_tmp83_);
					xAdvances = _tmp84_;
					_tmp85_ = xAdvances;
					_tmp86_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp85_);
					_tmp87_ = _tmp86_;
					n = _tmp87_;
					{
						gint i = 0;
						i = 0;
						{
							gboolean _tmp88_ = FALSE;
							_tmp88_ = TRUE;
							while (TRUE) {
								gint _tmp90_ = 0;
								gdouble* xAdvance = NULL;
								GeeArrayList* _tmp91_ = NULL;
								gint _tmp92_ = 0;
								gpointer _tmp93_ = NULL;
								gdouble _tmp94_ = 0.0;
								gdouble* _tmp95_ = NULL;
								gboolean _tmp96_ = FALSE;
								gboolean _tmp97_ = FALSE;
								gboolean _tmp98_ = FALSE;
								gboolean _tmp99_ = FALSE;
								if (!_tmp88_) {
									gint _tmp89_ = 0;
									_tmp89_ = i;
									i = _tmp89_ + 1;
								}
								_tmp88_ = FALSE;
								_tmp90_ = n;
								if (!(i <= (_tmp90_ - 1))) {
									break;
								}
								_tmp91_ = xAdvances;
								_tmp92_ = i;
								_tmp93_ = gee_abstract_list_get ((GeeAbstractList*) _tmp91_, _tmp92_);
								xAdvance = (gdouble*) _tmp93_;
								_tmp94_ = x;
								_tmp95_ = xAdvance;
								x = _tmp94_ + (*_tmp95_);
								_tmp99_ = wrap;
								if (_tmp99_) {
									gdouble _tmp100_ = 0.0;
									gdouble _tmp101_ = 0.0;
									_tmp100_ = x;
									_tmp101_ = targetWidth;
									_tmp98_ = _tmp100_ > _tmp101_;
								} else {
									_tmp98_ = FALSE;
								}
								if (_tmp98_) {
									gint _tmp102_ = 0;
									_tmp102_ = i;
									_tmp97_ = _tmp102_ > 1;
								} else {
									_tmp97_ = FALSE;
								}
								if (_tmp97_) {
									gdouble _tmp103_ = 0.0;
									gdouble* _tmp104_ = NULL;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp105_ = NULL;
									GeeArrayList* _tmp106_ = NULL;
									gint _tmp107_ = 0;
									gpointer _tmp108_ = NULL;
									sdxgraphicss2dBitmapFontGlyph* _tmp109_ = NULL;
									gint _tmp110_ = 0;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp111_ = NULL;
									GeeArrayList* _tmp112_ = NULL;
									gint _tmp113_ = 0;
									gpointer _tmp114_ = NULL;
									sdxgraphicss2dBitmapFontGlyph* _tmp115_ = NULL;
									gint _tmp116_ = 0;
									sdxgraphicss2dBitmapFontBitmapFontData* _tmp117_ = NULL;
									gdouble _tmp118_ = 0.0;
									gdouble _tmp119_ = 0.0;
									_tmp103_ = x;
									_tmp104_ = xAdvance;
									_tmp105_ = run;
									_tmp106_ = _tmp105_->glyphs;
									_tmp107_ = i;
									_tmp108_ = gee_abstract_list_get ((GeeAbstractList*) _tmp106_, _tmp107_ - 1);
									_tmp109_ = (sdxgraphicss2dBitmapFontGlyph*) _tmp108_;
									_tmp110_ = _tmp109_->xoffset;
									_tmp111_ = run;
									_tmp112_ = _tmp111_->glyphs;
									_tmp113_ = i;
									_tmp114_ = gee_abstract_list_get ((GeeAbstractList*) _tmp112_, _tmp113_ - 1);
									_tmp115_ = (sdxgraphicss2dBitmapFontGlyph*) _tmp114_;
									_tmp116_ = _tmp115_->width;
									_tmp117_ = fontData;
									_tmp118_ = _tmp117_->scaleX;
									_tmp119_ = targetWidth;
									_tmp96_ = (((_tmp103_ - (*_tmp104_)) + ((_tmp110_ + _tmp116_) * _tmp118_)) - 0.0001) > _tmp119_;
									_sdx_graphics_s2d_bitmap_font_glyph_unref0 (_tmp115_);
									_sdx_graphics_s2d_bitmap_font_glyph_unref0 (_tmp109_);
								} else {
									_tmp96_ = FALSE;
								}
								if (_tmp96_) {
									const gchar* _tmp120_ = NULL;
									gint wrapIndex = 0;
									sdxgraphicss2dBitmapFontBitmapFontData* _tmp131_ = NULL;
									gint _tmp132_ = 0;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp133_ = NULL;
									GeeArrayList* _tmp134_ = NULL;
									gint _tmp135_ = 0;
									gboolean _tmp136_ = FALSE;
									gboolean _tmp137_ = FALSE;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp138_ = NULL;
									gdouble _tmp139_ = 0.0;
									sdxgraphicss2dGlyphLayoutGlyphRun* next = NULL;
									gint _tmp147_ = 0;
									gdouble _tmp158_ = 0.0;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp159_ = NULL;
									gdouble _tmp160_ = 0.0;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp161_ = NULL;
									gdouble _tmp162_ = 0.0;
									gdouble _tmp163_ = 0.0;
									gdouble _tmp164_ = 0.0;
									sdxgraphicss2dBitmapFontBitmapFontData* _tmp165_ = NULL;
									gdouble _tmp166_ = 0.0;
									gint _tmp167_ = 0;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp168_ = NULL;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp169_ = NULL;
									gdouble _tmp170_ = 0.0;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp171_ = NULL;
									GeeArrayList* _tmp172_ = NULL;
									gint _tmp173_ = 0;
									gint _tmp174_ = 0;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp175_ = NULL;
									GeeArrayList* _tmp176_ = NULL;
									GeeArrayList* _tmp177_ = NULL;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp178_ = NULL;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp179_ = NULL;
									_tmp120_ = truncate;
									if (_tmp120_ != NULL) {
										sdxgraphicss2dBitmapFontBitmapFontData* _tmp121_ = NULL;
										sdxgraphicss2dGlyphLayoutGlyphRun* _tmp122_ = NULL;
										gdouble _tmp123_ = 0.0;
										const gchar* _tmp124_ = NULL;
										gint _tmp125_ = 0;
										sdxutilsPool* _tmp126_ = NULL;
										sdxgraphicss2dGlyphLayoutGlyphRun* _tmp127_ = NULL;
										gdouble _tmp128_ = 0.0;
										sdxgraphicss2dGlyphLayoutGlyphRun* _tmp129_ = NULL;
										gdouble _tmp130_ = 0.0;
										_tmp121_ = fontData;
										_tmp122_ = run;
										_tmp123_ = targetWidth;
										_tmp124_ = truncate;
										_tmp125_ = i;
										_tmp126_ = glyphRunPool;
										sdx_graphics_s2d_glyph_layout_truncate (self, _tmp121_, _tmp122_, _tmp123_, _tmp124_, _tmp125_, _tmp126_);
										_tmp127_ = run;
										_tmp128_ = _tmp127_->x;
										_tmp129_ = run;
										_tmp130_ = _tmp129_->width;
										x = _tmp128_ + _tmp130_;
										_g_free0 (xAdvance);
										break;
									}
									_tmp131_ = fontData;
									_tmp132_ = i;
									_tmp133_ = run;
									_tmp134_ = _tmp133_->glyphs;
									_tmp135_ = sdx_graphics_s2d_bitmap_font_bitmap_font_data_getWrapIndex (_tmp131_, _tmp132_, _tmp134_);
									wrapIndex = _tmp135_;
									_tmp138_ = run;
									_tmp139_ = _tmp138_->x;
									if (_tmp139_ == ((gdouble) 0)) {
										gint _tmp140_ = 0;
										_tmp140_ = wrapIndex;
										_tmp137_ = _tmp140_ == 0;
									} else {
										_tmp137_ = FALSE;
									}
									if (_tmp137_) {
										_tmp136_ = TRUE;
									} else {
										gint _tmp141_ = 0;
										sdxgraphicss2dGlyphLayoutGlyphRun* _tmp142_ = NULL;
										GeeArrayList* _tmp143_ = NULL;
										gint _tmp144_ = 0;
										gint _tmp145_ = 0;
										_tmp141_ = wrapIndex;
										_tmp142_ = run;
										_tmp143_ = _tmp142_->glyphs;
										_tmp144_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp143_);
										_tmp145_ = _tmp144_;
										_tmp136_ = _tmp141_ >= _tmp145_;
									}
									if (_tmp136_) {
										gint _tmp146_ = 0;
										_tmp146_ = i;
										wrapIndex = _tmp146_ - 1;
									}
									_tmp147_ = wrapIndex;
									if (_tmp147_ == 0) {
										sdxgraphicss2dGlyphLayoutGlyphRun* _tmp148_ = NULL;
										sdxgraphicss2dGlyphLayoutGlyphRun* _tmp149_ = NULL;
										_tmp148_ = run;
										_tmp149_ = _g_object_ref0 (_tmp148_);
										_g_object_unref0 (next);
										next = _tmp149_;
									} else {
										sdxgraphicss2dBitmapFontBitmapFontData* _tmp150_ = NULL;
										sdxgraphicss2dGlyphLayoutGlyphRun* _tmp151_ = NULL;
										sdxutilsPool* _tmp152_ = NULL;
										gint _tmp153_ = 0;
										gint _tmp154_ = 0;
										sdxgraphicss2dGlyphLayoutGlyphRun* _tmp155_ = NULL;
										GeeArrayList* _tmp156_ = NULL;
										sdxgraphicss2dGlyphLayoutGlyphRun* _tmp157_ = NULL;
										_tmp150_ = fontData;
										_tmp151_ = run;
										_tmp152_ = glyphRunPool;
										_tmp153_ = wrapIndex;
										_tmp154_ = i;
										_tmp155_ = sdx_graphics_s2d_glyph_layout_wrap (self, _tmp150_, _tmp151_, _tmp152_, _tmp153_, _tmp154_);
										_g_object_unref0 (next);
										next = _tmp155_;
										_tmp156_ = self->runs;
										_tmp157_ = next;
										gee_abstract_collection_add ((GeeAbstractCollection*) _tmp156_, _tmp157_);
									}
									_tmp158_ = width;
									_tmp159_ = run;
									_tmp160_ = _tmp159_->x;
									_tmp161_ = run;
									_tmp162_ = _tmp161_->width;
									_tmp163_ = fmax (_tmp158_, _tmp160_ + _tmp162_);
									width = _tmp163_;
									x = (gdouble) 0;
									_tmp164_ = y;
									_tmp165_ = fontData;
									_tmp166_ = _tmp165_->down;
									y = _tmp164_ + _tmp166_;
									_tmp167_ = lines;
									lines = _tmp167_ + 1;
									_tmp168_ = next;
									_tmp168_->x = (gdouble) 0;
									_tmp169_ = next;
									_tmp170_ = y;
									_tmp169_->y = _tmp170_;
									i = -1;
									_tmp171_ = next;
									_tmp172_ = _tmp171_->xAdvances;
									_tmp173_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp172_);
									_tmp174_ = _tmp173_;
									n = _tmp174_;
									_tmp175_ = next;
									_tmp176_ = _tmp175_->xAdvances;
									_tmp177_ = _g_object_ref0 (_tmp176_);
									_g_object_unref0 (xAdvances);
									xAdvances = _tmp177_;
									_tmp178_ = next;
									_tmp179_ = _g_object_ref0 (_tmp178_);
									_g_object_unref0 (run);
									run = _tmp179_;
									_g_object_unref0 (next);
								} else {
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp180_ = NULL;
									sdxgraphicss2dGlyphLayoutGlyphRun* _tmp181_ = NULL;
									gdouble _tmp182_ = 0.0;
									gdouble* _tmp183_ = NULL;
									_tmp180_ = run;
									_tmp181_ = run;
									_tmp182_ = _tmp181_->width;
									_tmp183_ = xAdvance;
									_tmp181_->width = _tmp182_ + (*_tmp183_);
								}
								_g_free0 (xAdvance);
							}
						}
					}
					_g_object_unref0 (xAdvances);
				}
				_g_object_unref0 (run);
			}
			_tmp184_ = newline;
			if (_tmp184_) {
				gdouble _tmp185_ = 0.0;
				gdouble _tmp186_ = 0.0;
				gdouble _tmp187_ = 0.0;
				gdouble down = 0.0;
				sdxgraphicss2dBitmapFontBitmapFontData* _tmp188_ = NULL;
				gdouble _tmp189_ = 0.0;
				gint _tmp190_ = 0;
				gint _tmp191_ = 0;
				gdouble _tmp197_ = 0.0;
				gdouble _tmp198_ = 0.0;
				_tmp185_ = width;
				_tmp186_ = x;
				_tmp187_ = fmax (_tmp185_, _tmp186_);
				width = _tmp187_;
				x = (gdouble) 0;
				_tmp188_ = fontData;
				_tmp189_ = _tmp188_->down;
				down = _tmp189_;
				_tmp190_ = runEnd;
				_tmp191_ = runStart;
				if (_tmp190_ == _tmp191_) {
					gdouble _tmp192_ = 0.0;
					sdxgraphicss2dBitmapFontBitmapFontData* _tmp193_ = NULL;
					gdouble _tmp194_ = 0.0;
					gint _tmp195_ = 0;
					_tmp192_ = down;
					_tmp193_ = fontData;
					_tmp194_ = _tmp193_->blankLineScale;
					down = _tmp192_ * _tmp194_;
					_tmp195_ = blankLines;
					blankLines = _tmp195_ + 1;
				} else {
					gint _tmp196_ = 0;
					_tmp196_ = lines;
					lines = _tmp196_ + 1;
				}
				_tmp197_ = y;
				_tmp198_ = down;
				y = _tmp197_ + _tmp198_;
			}
			_tmp199_ = start;
			runStart = _tmp199_;
			_tmp200_ = nextColor;
			color = _tmp200_;
		}
	}
	_g_object_unref0 (colorPool);
	_g_object_unref0 (nextColor);
	_g_object_unref0 (glyphRunPool);
	_sdx_graphics_s2d_bitmap_font_bitmap_font_data_unref0 (fontData);
}


void sdx_graphics_s2d_glyph_layout_truncate (sdxgraphicss2dGlyphLayout* self, sdxgraphicss2dBitmapFontBitmapFontData* fontData, sdxgraphicss2dGlyphLayoutGlyphRun* run, gdouble targetWidth, const gchar* truncate, gint widthIndex, sdxutilsPool* glyphRunPool) {
	g_return_if_fail (self != NULL);
	g_return_if_fail (fontData != NULL);
	g_return_if_fail (run != NULL);
	g_return_if_fail (truncate != NULL);
	g_return_if_fail (glyphRunPool != NULL);
}


gint sdx_graphics_s2d_glyph_layout_parseColorMarkup (sdxgraphicss2dGlyphLayout* self, const gchar* str, gint start, gint end, sdxutilsPool* colorPool) {
	gint result = 0;
	g_return_val_if_fail (self != NULL, 0);
	g_return_val_if_fail (str != NULL, 0);
	g_return_val_if_fail (colorPool != NULL, 0);
	result = 0;
	return result;
}


sdxgraphicss2dGlyphLayoutGlyphRun* sdx_graphics_s2d_glyph_layout_wrap (sdxgraphicss2dGlyphLayout* self, sdxgraphicss2dBitmapFontBitmapFontData* fontData, sdxgraphicss2dGlyphLayoutGlyphRun* first, sdxutilsPool* glyphRunPool, gint wrapIndex, gint widthIndex) {
	sdxgraphicss2dGlyphLayoutGlyphRun* result = NULL;
	sdxgraphicss2dGlyphLayoutGlyphRun* _tmp0_ = NULL;
	sdxgraphicss2dGlyphLayoutGlyphRun* _tmp1_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (fontData != NULL, NULL);
	g_return_val_if_fail (first != NULL, NULL);
	g_return_val_if_fail (glyphRunPool != NULL, NULL);
	_tmp0_ = first;
	_tmp1_ = _g_object_ref0 (_tmp0_);
	result = _tmp1_;
	return result;
}


static void sdx_graphics_s2d_glyph_layout_real_reset (sdxutilsPoolable* base) {
	sdxgraphicss2dGlyphLayout * self;
	self = (sdxgraphicss2dGlyphLayout*) base;
}


static void sdx_graphics_s2d_glyph_layout_glyph_run_real_reset (sdxutilsPoolable* base) {
	sdxgraphicss2dGlyphLayoutGlyphRun * self;
	GeeArrayList* _tmp0_ = NULL;
	GeeArrayList* _tmp1_ = NULL;
	self = (sdxgraphicss2dGlyphLayoutGlyphRun*) base;
	_tmp0_ = self->glyphs;
	gee_abstract_collection_clear ((GeeAbstractCollection*) _tmp0_);
	_tmp1_ = self->xAdvances;
	gee_abstract_collection_clear ((GeeAbstractCollection*) _tmp1_);
	self->width = (gdouble) 0;
}


sdxgraphicss2dGlyphLayoutGlyphRun* sdx_graphics_s2d_glyph_layout_glyph_run_construct (GType object_type) {
	sdxgraphicss2dGlyphLayoutGlyphRun * self = NULL;
	self = (sdxgraphicss2dGlyphLayoutGlyphRun*) g_object_new (object_type, NULL);
	return self;
}


sdxgraphicss2dGlyphLayoutGlyphRun* sdx_graphics_s2d_glyph_layout_glyph_run_new (void) {
	return sdx_graphics_s2d_glyph_layout_glyph_run_construct (SDX_GRAPHICS_S2D_GLYPH_LAYOUT_TYPE_GLYPH_RUN);
}


static void sdx_graphics_s2d_glyph_layout_glyph_run_class_init (sdxgraphicss2dGlyphLayoutGlyphRunClass * klass) {
	sdx_graphics_s2d_glyph_layout_glyph_run_parent_class = g_type_class_peek_parent (klass);
	G_OBJECT_CLASS (klass)->finalize = sdx_graphics_s2d_glyph_layout_glyph_run_finalize;
}


static void sdx_graphics_s2d_glyph_layout_glyph_run_sdx_utils_poolable_interface_init (sdxutilsPoolableIface * iface) {
	sdx_graphics_s2d_glyph_layout_glyph_run_sdx_utils_poolable_parent_iface = g_type_interface_peek_parent (iface);
	iface->reset = (void (*)(sdxutilsPoolable*)) sdx_graphics_s2d_glyph_layout_glyph_run_real_reset;
}


static void sdx_graphics_s2d_glyph_layout_glyph_run_instance_init (sdxgraphicss2dGlyphLayoutGlyphRun * self) {
	GeeArrayList* _tmp0_ = NULL;
	sdxgraphicsColor* _tmp1_ = NULL;
	_tmp0_ = gee_array_list_new (SDX_GRAPHICS_S2D_BITMAP_FONT_TYPE_GLYPH, (GBoxedCopyFunc) sdx_graphics_s2d_bitmap_font_glyph_ref, (GDestroyNotify) sdx_graphics_s2d_bitmap_font_glyph_unref, NULL, NULL, NULL);
	self->glyphs = _tmp0_;
	_tmp1_ = sdx_graphics_color_new ((gint64) 0);
	self->color = _tmp1_;
}


static void sdx_graphics_s2d_glyph_layout_glyph_run_finalize (GObject* obj) {
	sdxgraphicss2dGlyphLayoutGlyphRun * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SDX_GRAPHICS_S2D_GLYPH_LAYOUT_TYPE_GLYPH_RUN, sdxgraphicss2dGlyphLayoutGlyphRun);
	_g_object_unref0 (self->glyphs);
	_g_object_unref0 (self->xAdvances);
	_g_object_unref0 (self->color);
	G_OBJECT_CLASS (sdx_graphics_s2d_glyph_layout_glyph_run_parent_class)->finalize (obj);
}


GType sdx_graphics_s2d_glyph_layout_glyph_run_get_type (void) {
	static volatile gsize sdx_graphics_s2d_glyph_layout_glyph_run_type_id__volatile = 0;
	if (g_once_init_enter (&sdx_graphics_s2d_glyph_layout_glyph_run_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (sdxgraphicss2dGlyphLayoutGlyphRunClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) sdx_graphics_s2d_glyph_layout_glyph_run_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (sdxgraphicss2dGlyphLayoutGlyphRun), 0, (GInstanceInitFunc) sdx_graphics_s2d_glyph_layout_glyph_run_instance_init, NULL };
		static const GInterfaceInfo sdx_utils_poolable_info = { (GInterfaceInitFunc) sdx_graphics_s2d_glyph_layout_glyph_run_sdx_utils_poolable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType sdx_graphics_s2d_glyph_layout_glyph_run_type_id;
		sdx_graphics_s2d_glyph_layout_glyph_run_type_id = g_type_register_static (G_TYPE_OBJECT, "sdxgraphicss2dGlyphLayoutGlyphRun", &g_define_type_info, 0);
		g_type_add_interface_static (sdx_graphics_s2d_glyph_layout_glyph_run_type_id, SDX_UTILS_TYPE_POOLABLE, &sdx_utils_poolable_info);
		g_once_init_leave (&sdx_graphics_s2d_glyph_layout_glyph_run_type_id__volatile, sdx_graphics_s2d_glyph_layout_glyph_run_type_id);
	}
	return sdx_graphics_s2d_glyph_layout_glyph_run_type_id__volatile;
}


static void sdx_graphics_s2d_glyph_layout_class_init (sdxgraphicss2dGlyphLayoutClass * klass) {
	sdx_graphics_s2d_glyph_layout_parent_class = g_type_class_peek_parent (klass);
	G_OBJECT_CLASS (klass)->finalize = sdx_graphics_s2d_glyph_layout_finalize;
}


static void sdx_graphics_s2d_glyph_layout_sdx_utils_poolable_interface_init (sdxutilsPoolableIface * iface) {
	sdx_graphics_s2d_glyph_layout_sdx_utils_poolable_parent_iface = g_type_interface_peek_parent (iface);
	iface->reset = (void (*)(sdxutilsPoolable*)) sdx_graphics_s2d_glyph_layout_real_reset;
}


static void sdx_graphics_s2d_glyph_layout_instance_init (sdxgraphicss2dGlyphLayout * self) {
	GeeArrayList* _tmp0_ = NULL;
	_tmp0_ = gee_array_list_new (SDX_GRAPHICS_S2D_GLYPH_LAYOUT_TYPE_GLYPH_RUN, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL);
	self->runs = _tmp0_;
}


static void sdx_graphics_s2d_glyph_layout_finalize (GObject* obj) {
	sdxgraphicss2dGlyphLayout * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SDX_GRAPHICS_S2D_TYPE_GLYPH_LAYOUT, sdxgraphicss2dGlyphLayout);
	_g_object_unref0 (self->runs);
	_g_object_unref0 (self->colorStack);
	G_OBJECT_CLASS (sdx_graphics_s2d_glyph_layout_parent_class)->finalize (obj);
}


GType sdx_graphics_s2d_glyph_layout_get_type (void) {
	static volatile gsize sdx_graphics_s2d_glyph_layout_type_id__volatile = 0;
	if (g_once_init_enter (&sdx_graphics_s2d_glyph_layout_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (sdxgraphicss2dGlyphLayoutClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) sdx_graphics_s2d_glyph_layout_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (sdxgraphicss2dGlyphLayout), 0, (GInstanceInitFunc) sdx_graphics_s2d_glyph_layout_instance_init, NULL };
		static const GInterfaceInfo sdx_utils_poolable_info = { (GInterfaceInitFunc) sdx_graphics_s2d_glyph_layout_sdx_utils_poolable_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType sdx_graphics_s2d_glyph_layout_type_id;
		sdx_graphics_s2d_glyph_layout_type_id = g_type_register_static (G_TYPE_OBJECT, "sdxgraphicss2dGlyphLayout", &g_define_type_info, 0);
		g_type_add_interface_static (sdx_graphics_s2d_glyph_layout_type_id, SDX_UTILS_TYPE_POOLABLE, &sdx_utils_poolable_info);
		g_once_init_leave (&sdx_graphics_s2d_glyph_layout_type_id__volatile, sdx_graphics_s2d_glyph_layout_type_id);
	}
	return sdx_graphics_s2d_glyph_layout_type_id__volatile;
}



